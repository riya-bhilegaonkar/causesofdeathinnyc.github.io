<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>HIV/Aids Related Deaths in New York City</title>

<script src="site_libs/header-attrs-2.18/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="index.html">Report</a>
</li>
<li>
  <a href="age.html">Suicide and Opioid Poisonings</a>
</li>
<li>
  <a href="Heart-Disease-Related-Deaths.html">Heart Disease</a>
</li>
<li>
  <a href="income_and_cancer_rates.html">Cancer</a>
</li>
<li>
  <a href="hiv_analysis.html">HIV/AIDS</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">HIV/Aids Related Deaths in New York
City</h1>

</div>


<div id="motivation-to-investiagate-hivaids-related-deaths"
class="section level2">
<h2>Motivation to Investiagate HIV/Aids Related Deaths</h2>
<p>New York City was affected by the HIV/AIDS epidemic more than any
other U.S. city. When AIDS was first discovered in 1891, little was
known about the mysterious disease rapidly spreading through the city
and disproportionately affecting gay men. Doctors had no clue about the
diseases’ origin, and there was no medical treatment. As a result,
people with AIDS were essentially given a death sentence. A CDC report
from 1987 estimated that 70,000 people in NYC had AIDS, and AIDS cases
in NYC accounted for 30% of AIDS cases in the USA. The same report
stated that of all AIDS cases in reported in NYC, 51% of adults and 59%
of children have died. By the end of 192, AIDS had become the number one
cause of death for U.S. men ages 25 to 44. More than one million
Americans were infected with HIV, and nearly 10 million people were
infected with HIV worldwide. Given New York City’s history with
HIV/AIDS, we wanted to explore recent HIV/AIDS data mortality data.
Since access to diagnosis and treatment is now widely available
throughout the city, we were interested in analyzing trends in
HIV-related deaths accounting by sociodemographic factors such as race,
age, sex, and NYC borough.</p>
<pre class="r"><code>#Import data set and clean data

hiv_data = read.csv(&quot;data/DOHMH_HIV_AIDS_Annual_Report.csv&quot;) %&gt;%
   janitor::clean_names() %&gt;%
    na_if(., 99999) %&gt;%
  rename(., sex = gender)</code></pre>
<p>The sharp decline in HIV/AIDs related mortality in NYC observed in
our data coincides with USA’s mortality trends reported by the CDC in
2014. This steep decline in the registered number of deaths is explained
by the significant scientific and medical advances in HIV diagnosis and
treatment of early 2000. In 2011, a landmark research study showed that
putting healthy individuals living with HIV on antiretrovirals can limit
their virus transmission by 96%. The same FDA approved the first at-home
HIV test, and considerable advances were made in treatment. NYC’s
success in fighting the HIV/AIDS epidemic results from the courageous
work of activists, medical advocates, scientists, and brave gay men and
women throughout NYC and the world.</p>
</div>
<div id="exploring-hivaids-related-deaths-in-nyc-by-race-age-and-sex"
class="section level2">
<h2>Exploring HIV/Aids Related Deaths in NYC by Race, Age, and Sex</h2>
<p>Not everyone has the same access to HIV/AIDS care and early
diagnosis, and access to medical services, in general, differs
substantially by race, income, and neighborhood. Therefore, in the
following sections, we will focus on our analysis of how the decline in
HIV/AIDS-related deaths varies by race/ethnicity, age, sex, and NYC
borough, as a proxy of income and SES.</p>
<pre class="r"><code>#Number of HIV-related Deaths in NYC (2011-2015)

hiv_deaths = hiv_data %&gt;% 
  filter(borough == &quot;All&quot;) %&gt;% # Filter hiv data by borough
  select(.data = ., year, deaths) %&gt;%
  group_by(year) %&gt;%
  summarise(sum_deaths = sum(deaths))
  
ggplot(data=hiv_deaths, aes(x=year, y= sum_deaths, group=1)) +
    geom_line() +
    geom_point()+
  labs (title = &quot;Number of HIV/AIDS Related deaths in NYC (2011-2015)&quot;,
    x = &quot;Year&quot;,
    y = &quot;Number of deaths&quot;) +
  theme(plot.title = element_text(hjust = 0.5))</code></pre>
<p><img src="hiv_analysis_files/figure-html/unnamed-chunk-2-1.png" width="90%" /></p>
<pre class="r"><code>#Boxplot Hiv-Related Deaths by Race 
hiv_data %&gt;% 
  filter(race != &quot;All&quot; &amp; race != &quot;Other/Unknown&quot;) %&gt;% 
  filter(year != &quot;All&quot;) %&gt;% 
  filter(borough == &quot;All&quot;) %&gt;% 
  select(.data = ., deaths, race, year) %&gt;% 
  ggplot(aes(y = deaths, x = reorder(race, -deaths), color = race)) +
  geom_boxplot() +
  theme_classic() +
  labs(x = &quot;Race&quot;,
       y = &quot;Number of Deaths&quot;,
       title = &quot;HIV/AIDS related Deaths by Race&quot;) +
  theme(plot.title = element_text(hjust = 0.7))  </code></pre>
<p><img src="hiv_analysis_files/figure-html/unnamed-chunk-3-1.png" width="90%" /></p>
<pre class="r"><code>#Boxplot Hiv-related Deaths in NYCby Age 
hiv_data %&gt;% 
  filter(age != &quot;All&quot;) %&gt;% 
  filter(year != &quot;All&quot;) %&gt;%
  filter(borough == &quot;All&quot;) %&gt;% 
  select(.data = ., deaths, age, year) %&gt;% 
  ggplot(aes(y = deaths, x = reorder(age, -deaths), color = age)) +
  geom_boxplot() +
  labs(x = &quot;Age Group&quot;,
       y = &quot;Number of Deaths&quot;,
       title = &quot;HIV/AIDS Related Deaths by Age&quot;) +
  theme(plot.title = element_text(hjust = 0.7))  </code></pre>
<p><img src="hiv_analysis_files/figure-html/unnamed-chunk-4-1.png" width="90%" /></p>
<pre class="r"><code>#Boxplot Hiv-related Deaths in NYC by Sex 
hiv_data %&gt;% 
  filter(sex != &quot;All&quot; &amp; sex != &quot;Transgender&quot;) %&gt;% 
  filter(borough == &quot;All&quot;) %&gt;% 
  select(.data = ., deaths, sex, year) %&gt;% 
  ggplot(aes(y = deaths, x = reorder(sex, -deaths), color = sex)) +
  geom_boxplot() +
  labs(x = &quot;Sex&quot;,
       y = &quot;Number of Deaths&quot;,
       title = &quot;HIV/AIDS Related Deaths by Sex&quot;) +
  theme(plot.title = element_text(hjust = 0.7))  </code></pre>
<p><img src="hiv_analysis_files/figure-html/unnamed-chunk-5-1.png" width="90%" /></p>
</div>
<div id="visualiazing-hivaids-related-deaths-by-nyc-borough"
class="section level2">
<h2>Visualiazing HIV/Aids Related Deaths by NYC Borough</h2>
<p>Now we will visualize the trends in number of HIV/AIDS related deaths
for each one of the five NYC <code>borough</code>:</p>
<pre class="r"><code>#HIV-related deaths in NYC by race 

hiv_data %&gt;% # Filter hiv data by borough
  filter(borough != &quot;All&quot;) %&gt;% # Filter hiv data by borough
  filter(race != &quot;All&quot; &amp; race != &#39;Other/Unknown&#39;) %&gt;% # Filter hiv data by race
  select(.data = ., year, deaths, race, borough)   %&gt;% 
      group_by(year, race, borough) %&gt;%
         summarise(sum_deaths = sum(deaths)) %&gt;% #total number of deaths  
 ggplot(aes(x = year, y = sum_deaths, color = race)) +
    geom_line() +
  facet_grid(~borough) +
  labs (title = &quot;HIV/AIDS related deaths in NYC Boroughs by Race (2011-2015)&quot;,  
    x = &quot;Year&quot;,
    y = &quot;Number of deaths&quot;) + 
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +
  theme(plot.title = element_text(hjust = 0.5))  </code></pre>
<p><img src="hiv_analysis_files/figure-html/unnamed-chunk-6-1.png" width="90%" /></p>
<pre class="r"><code>#Number of HIV-related deaths in NYC by Age
hiv_data %&gt;% 
  filter(age != &quot;All&quot;) %&gt;% # Filter hiv data by gender
  filter(borough != &quot;All&quot;) %&gt;% # Filter hiv data by borough
  select(.data = ., year, deaths, age, borough)  %&gt;%
  na_if(., 0) %&gt;%
  group_by(year, borough, age)  %&gt;%
summarise(sum_deaths = sum(deaths, na.rm = T)) %&gt;%
 ggplot(aes(x = year, y = sum_deaths, fill = age)) +
  geom_bar(stat= &quot;identity&quot;) +
  facet_grid(~borough) +
  labs(title = &quot;HIV/AIDS related deaths in NYC by Sex (2011-2015)&quot;,  
    x = &quot;Year&quot;,
    y = &quot;Average Number of deaths&quot;) + 
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +
  theme(plot.title = element_text(hjust = 0.5))  </code></pre>
<p><img src="hiv_analysis_files/figure-html/unnamed-chunk-7-1.png" width="90%" /></p>
<pre class="r"><code>#Number of HIV-related deaths in NYC by Sex 
hiv_data %&gt;% 
  filter(sex != &quot;All&quot;) %&gt;% # Filter hiv data by gender
  filter(sex != &quot;Transgender&quot;) %&gt;% # Filter hiv data by gender
  filter(borough != &quot;All&quot;) %&gt;% # Filter hiv data by borough
  select(.data = ., year, deaths, sex, borough)  %&gt;%
  na_if(., 0) %&gt;%
  group_by(year, borough, sex)  %&gt;%
summarise(sum_deaths = sum(deaths, na.rm = T)) %&gt;%
 ggplot(aes(x = year, y = sum_deaths, fill = sex)) +
  geom_bar(stat= &quot;identity&quot;) +
  facet_grid(~borough) +
  labs(title = &quot;HIV/AIDS related deaths in NYC by Sex (2011-2015)&quot;,  
    x = &quot;Year&quot;,
    y = &quot;Average Number of deaths&quot;) + 
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +
  theme(plot.title = element_text(hjust = 0.5))  </code></pre>
<p><img src="hiv_analysis_files/figure-html/unnamed-chunk-8-1.png" width="90%" /></p>
</div>
<div id="further-analysis" class="section level2">
<h2>Further Analysis</h2>
<div
id="fitting-a-slr-model-analysing-the-relationship-between-race-and-of-hiv-related-death-rate-in-nyc"
class="section level3">
<h3>Fitting a SLR Model: Analysing the relationship between race and of
hiv-related death rate in NYC</h3>
<pre class="r"><code>hiv_race_slr = lm(deaths ~ race, data = hiv_data)

hiv_race_result = hiv_race_slr %&gt;% 
  broom::tidy() %&gt;% 
  filter(p.value &lt; 0.05) %&gt;%
   select(term, estimate, p.value) %&gt;%
  knitr::kable()

hiv_race_result </code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">20.16699</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">raceAsian/Pacific Islander</td>
<td align="right">-19.58958</td>
<td align="right">0.0000005</td>
</tr>
<tr class="odd">
<td align="left">raceOther/Unknown</td>
<td align="right">-19.94824</td>
<td align="right">0.0000003</td>
</tr>
<tr class="even">
<td align="left">raceWhite</td>
<td align="right">-13.14824</td>
<td align="right">0.0007278</td>
</tr>
</tbody>
</table>
</div>
<div
id="fitting-a-mlr-model-finding-the-fiiting-model-of-hiv-related-death-rate-in-nyc"
class="section level3">
<h3>Fitting a MLR Model: Finding the fiiting model of hiv-related death
rate in NYC</h3>
<p><em>The best fit model is</em>:</p>
<pre class="r"><code>hiv_mlr = lm(deaths ~ race + age + sex + borough + concurrent_diagnoses + x_linked_to_care_within_3_months, data = hiv_data)

hiv_mlr_result = hiv_mlr %&gt;% 
  broom::tidy() %&gt;% 
  filter(p.value &lt; 0.05) %&gt;%
   select(term, estimate, p.value) %&gt;%
  knitr::kable()

hiv_mlr_result </code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">30.5918451</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">age20 - 29</td>
<td align="right">-7.5626953</td>
<td align="right">0.0001848</td>
</tr>
<tr class="odd">
<td align="left">age30 - 39</td>
<td align="right">-8.1494610</td>
<td align="right">0.0000533</td>
</tr>
<tr class="even">
<td align="left">age50 - 59</td>
<td align="right">12.7776853</td>
<td align="right">0.0000000</td>
</tr>
<tr class="odd">
<td align="left">age60+</td>
<td align="right">17.9888184</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">sexTransgender</td>
<td align="right">-35.1005032</td>
<td align="right">0.0037298</td>
</tr>
<tr class="odd">
<td align="left">boroughBronx</td>
<td align="right">-21.1931564</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">boroughBrooklyn</td>
<td align="right">-29.5445140</td>
<td align="right">0.0000000</td>
</tr>
<tr class="odd">
<td align="left">boroughManhattan</td>
<td align="right">-28.7044907</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">boroughQueens</td>
<td align="right">-33.4780930</td>
<td align="right">0.0000000</td>
</tr>
<tr class="odd">
<td align="left">boroughStaten Island</td>
<td align="right">-25.7066896</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">concurrent_diagnoses</td>
<td align="right">3.0521693</td>
<td align="right">0.0000000</td>
</tr>
<tr class="odd">
<td align="left">x_linked_to_care_within_3_months</td>
<td align="right">-0.0328377</td>
<td align="right">0.0336239</td>
</tr>
</tbody>
</table>
<pre class="r"><code>
#stepwise regression

step(hiv_mlr, direction=&#39;backward&#39;)
## Start:  AIC=29219.52
## deaths ~ race + age + sex + borough + concurrent_diagnoses + 
##     x_linked_to_care_within_3_months
## 
##                                    Df Sum of Sq      RSS   AIC
## - race                              5      4329  3010211 29216
## &lt;none&gt;                                           3005882 29220
## - x_linked_to_care_within_3_months  1      3043  3008925 29222
## - sex                               3     20727  3026609 29244
## - borough                           5    142497  3148379 29417
## - age                               6    213449  3219331 29515
## - concurrent_diagnoses              1  22461392 25467274 38797
## 
## Step:  AIC=29215.97
## deaths ~ age + sex + borough + concurrent_diagnoses + x_linked_to_care_within_3_months
## 
##                                    Df Sum of Sq      RSS   AIC
## &lt;none&gt;                                           3010211 29216
## - x_linked_to_care_within_3_months  1      3407  3013618 29219
## - sex                               3     23537  3033747 29245
## - borough                           5    140848  3151059 29411
## - age                               6    213074  3223285 29511
## - concurrent_diagnoses              1  23388769 26398980 38948
## 
## Call:
## lm(formula = deaths ~ age + sex + borough + concurrent_diagnoses + 
##     x_linked_to_care_within_3_months, data = hiv_data)
## 
## Coefficients:
##                      (Intercept)                        age20 - 29  
##                          30.7969                           -7.6097  
##                       age30 - 39                        age40 - 49  
##                          -8.1993                           -2.2420  
##                       age50 - 59                            age60+  
##                          12.7407                           17.9615  
##                           ageAll                         sexFemale  
##                           2.2322                           -0.6547  
##                          sexMale                    sexTransgender  
##                          -4.6877                          -34.1332  
##                     boroughBronx                   boroughBrooklyn  
##                         -20.3149                          -28.7193  
##                 boroughManhattan                     boroughQueens  
##                         -27.8994                          -32.7003  
##             boroughStaten Island              concurrent_diagnoses  
##                         -24.7167                            3.0587  
## x_linked_to_care_within_3_months  
##                          -0.0347

mallow_cp = ols_step_best_subset(hiv_mlr,cp)
mallow_cp
##                                  Best Subsets Regression                                 
## -----------------------------------------------------------------------------------------
## Model Index    Predictors
## -----------------------------------------------------------------------------------------
##      1         concurrent_diagnoses                                                       
##      2         age concurrent_diagnoses                                                   
##      3         age borough concurrent_diagnoses                                           
##      4         age borough concurrent_diagnoses x_linked_to_care_within_3_months          
##      5         age sex borough concurrent_diagnoses x_linked_to_care_within_3_months      
##      6         race age sex borough concurrent_diagnoses x_linked_to_care_within_3_months 
## -----------------------------------------------------------------------------------------
## 
##                                                            Subsets Regression Summary                                                            
## -------------------------------------------------------------------------------------------------------------------------------------------------
##                        Adj.        Pred                                                                                                           
## Model    R-Square    R-Square    R-Square       C(p)          AIC           SBIC          SBC            MSEP          FPE        HSP       APC  
## -------------------------------------------------------------------------------------------------------------------------------------------------
##   1        0.9124      0.9124      0.9115     -953.4915    55095.9484    38060.8594    55116.0485    3400864.8119    566.7163    0.0944    0.0877 
##   2        0.9169      0.9169      0.9159    -1213.9164    54787.3101    37742.9343    54847.6102    3224517.8218    537.8677    0.0896    0.0831 
##   3        0.9202      0.9201      0.9185    -1401.9624    54553.9254    37502.4167    54647.7256    3096914.4634    517.0138    0.0861    0.0799 
##   4        0.9208      0.9206      0.9189       29.3546    41969.0858    29228.8399    42065.2065    3037135.1692    679.5997    0.1516    0.0794 
##   5        0.9214      0.9211      0.9194       -3.5760    41940.1697    29196.0086    42055.5146    3014245.4311    674.9305    0.1506    0.0788 
##   6        0.9215      0.9212      0.9195       -8.0000    41943.7187    29191.5848    42091.1038    3010583.6674    674.8656    0.1506    0.0787 
## -------------------------------------------------------------------------------------------------------------------------------------------------
## AIC: Akaike Information Criteria 
##  SBIC: Sawa&#39;s Bayesian Information Criteria 
##  SBC: Schwarz Bayesian Criteria 
##  MSEP: Estimated error of prediction, assuming multivariate normality 
##  FPE: Final Prediction Error 
##  HSP: Hocking&#39;s Sp 
##  APC: Amemiya Prediction Criteria</code></pre>
<pre class="r"><code>library(caret)

set.seed(1)
# Use 10-fold validation and create the training sets
train = trainControl(method = &quot;cv&quot;, number = 10)

# Fit the 4 -variables model that we selected: murder, hs_grad, frost
model_caret = train(deaths ~ age + sex + borough + concurrent_diagnoses + x_linked_to_care_within_3_months,
                   data = hiv_data,
                   trControl = train,
                   method = &#39;lm&#39;,
                   na.action = na.omit)

model_caret$hiv_mlr 
## NULL

summary(model_caret)
## 
## Call:
## lm(formula = .outcome ~ ., data = dat)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -318.76   -5.58    0.69    6.08  374.69 
## 
## Coefficients:
##                                   Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)                       30.79694    3.86151   7.975 1.92e-15 ***
## `age20 - 29`                      -7.60972    2.02119  -3.765 0.000169 ***
## `age30 - 39`                      -8.19925    2.01508  -4.069 4.80e-05 ***
## `age40 - 49`                      -2.24204    2.01958  -1.110 0.266994    
## `age50 - 59`                      12.74074    2.04866   6.219 5.46e-10 ***
## `age60+`                          17.96155    2.14661   8.367  &lt; 2e-16 ***
## ageAll                             2.23220    1.67043   1.336 0.181519    
## sexFemale                         -0.65472    1.89458  -0.346 0.729676    
## sexMale                           -4.68766    1.84748  -2.537 0.011204 *  
## sexTransgender                   -34.13322   12.09001  -2.823 0.004775 ** 
## boroughBronx                     -20.31493    2.83194  -7.174 8.52e-13 ***
## boroughBrooklyn                  -28.71927    2.79251 -10.284  &lt; 2e-16 ***
## boroughManhattan                 -27.89941    2.81461  -9.912  &lt; 2e-16 ***
## boroughQueens                    -32.70025    2.82767 -11.564  &lt; 2e-16 ***
## `boroughStaten Island`           -24.71673    3.05037  -8.103 6.87e-16 ***
## concurrent_diagnoses               3.05870    0.01642 186.279  &lt; 2e-16 ***
## x_linked_to_care_within_3_months  -0.03470    0.01543  -2.248 0.024604 *  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 25.96 on 4466 degrees of freedom
## Multiple R-squared:  0.9214, Adjusted R-squared:  0.9211 
## F-statistic:  3273 on 16 and 4466 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<div id="results-and-interpretation" class="section level2">
<h2>Results and Interpretation</h2>
<p>There has been a sharp decline in HIV/AIDs related mortality in NYC.
This steep decline is explained by the significant scientific and
medical advances in HIV diagnosis and treatment in early 2000. However,
the general trends in the city vary significantly by race/ethnicity and
borough. Black and Latino men continue to be disproportionately burdened
by HIV/AIDS. The number of HIV/AIDS-related deaths is significantly
higher in Brox, Brooklyn, and Queens, predominantly black and Latino
boroughs, compared to Manhattan and Staten Island. However, our SLR and
MLR indicate that these differences aren’t explained by race but are
primarily driven by other socioecnomic factors, such as borough of
residence and access to early HIV treatment. This result suggests that
differences observed by race/ethnicity in HIV/AIDs deaths could result
from inequities in access to medical care, information, and resources
available in each NYC borough.</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
