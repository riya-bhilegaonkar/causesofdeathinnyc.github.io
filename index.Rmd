---
title: "Final Report"
output: 
  html_document:
    toc: true
    toc_float: true
---
```{r include = FALSE}
library(tidyverse)
library(dplyr)
library(ggplot2)
library(plotly)
knitr::opts_chunk$set(
  fig.width = 6,
  fig.asp = .6,
  out.width = "90%"
)
theme_set(theme_minimal() + theme(legend.position = "bottom"))
options(
  ggplot2.continuous.colour = "viridis",
  ggplot2.continuous.fill = "viridis"
)
scale_colour_discrete = scale_colour_viridis_d
scale_fill_discrete = scale_fill_viridis_d
```

## Motivation

As a group, we are inspired by the historical changes in the health problems in a community, mortality patterns, and leading causes of death that we learned in our Principles of Epidemiology class. In 1839 cholera was reported as the primary cause of death in England. Nowadays, the leading cause of death in England, like in the US and most industrialized countries, is heart disease, with social and racial disparities in mortality from chronic diseases becoming the major challenge.

For this project, we started with a general question: What are the leading causes of death in NYC? We decided to focus on NYC as it’s the largest city in the US and one of the world’s most diverse cities. We found that heart disease, cancer, accidents, chronic lower respiratory disease, and stroke are the most prevalent causes in the city. We also considered other pertinent causes of death such as pregnancy-related mortality. This initial exploratory analysis led us to want to explore specific questions based on our interests and research experience. We chose the period of 2007-2019 to focus on the modern causes of death in the city to avoid confounding factors of death due to the COVID-19 outbreak (2019 onward).  

<br>
## Questions and Planned Analyses

Each team member decided to focus on a specific cause of death and an individual-level factor (i.e., age, income, education level, etc.) that contributed to the changes in leading causes of death observed in the past 12 years. Below are some of the specific questions we explore in our analysis: 

1. Heart Disease Related Death is one of the top leading causes of death in New York City. What is the relationship between age groups, sex, race, and Heart Disease Related Death?

2. There has been a notable stark discrepancy in maternal mortality (pregnancy-related deaths) in minority women. Is there a relationship between pregnancy-related deaths and the predictors of race and other factors?

3. We were also interested in examining cancer incidence and mortality rates as cancer of all forms is the second leading cause of death in New York City. What are the different social factors that can play a role in cancer rates we examined income levels across New York City? Are these predictors of cancer incidence and mortality rates across the city?

4. (Angelica's Questions)

5. There are stark differences between the leading causes of death among age groups. What were the leading causes of death by age group? Is there a relationship between age group as a predictor of Suicide Deaths and Opioid Poisoning Deaths? 

```{r include = FALSE}
Disease = c("Heart Disease", "Cancer", "HIV", "Poisonings", "Suicide", "Maternal Mortality")
Deaths = c(33294, 24627, 412, 4646, 1642, 513)
leading = data.frame(Disease, Deaths) 
```

```{r}
leading %>% 
  ggplot(aes(y = Deaths, x = reorder(Disease, Deaths), fill = Disease))+
  geom_bar(stat = "identity")+
  theme_classic()+
  labs(
    x = "Causes of Death",
    y = "Deaths",
    title = "New York Leading Causes of Death"
  )+
  theme(legend.position = "none")
```

[Figure Source](https://www.worldlifeexpectancy.com/new-york-cause-of-death-by-age-and-gender)

<br>
## Data Processing and Cleaning

1. Heart Disease Related Deaths [(Dataset)](https://health.data.ny.gov/Health/Vital-Statistics-Deaths-by-Region-and-Age-Group-by/c3ns-hz2v) 

Data was obtained from the Health Department of New York State. The dataset ‘Vital Statistics Deaths by Region and Age-Group by Selected Cause of Death Beginning 2003’ was tidied to only include heart disease related deaths. We factored the `age_group` as <1, 1-9, 10-19, 20-24, 25-34, 35-44, 45-54, 55-64, 65-74, 75-84, 85+ and `race_or_ethnicity` as White Non-Hispanic, Black Non-Hispanic, Hispanic, Other Non-Hispanic. We factored `sex` as Male and Female. The tidied dataset has 200 rows and 4 columns.  

The columns of interest for our analysis are:  

`deaths` : number of deaths related to one certain type of disease 

`sex` : gender 

`age_group` : age group 

`race_or_ethnicity` : race group 

<br>
2. (Jenifer's Datasets)

<br>
3. Median Household Income Data in New York City [(Dataset)](https://data.cccnewyork.org/data/download#0,8/0,29) 

Median Household Income Data for New York City and its boroughs was obtained from an organization called Citizens' Committee for Children of New York which organized tabular data on median household income between 2005 - 2019, for all neighborhoods and boroughs in New York City and for households with and without children. To clean the data, we had to remove columns that were not relevant to the analysis or contained explanations for the data formats. We also had to rename columns to their appropriate titles as well as converting column types to numeric forms as needed. Lastly, we filtered by household types to include households with and without children. 

The columns of interest for our analysis are: 

`location`: The borough or neighborhood within New York City 

`median_income`: The annual median household income for the specific location 

`household_type`: Whether the household has children or not, filtered for all households 

`year`: The year the data was reported 
 

* Cancer Incidence and Mortality Rates [(Dataset 1)](https://www.health.ny.gov/statistics/cancer/registry/),
[(Dataset 2)](https://www.health.ny.gov/statistics/cancer/registry/vol1n.htm)

Each link on this page to the cancer incidence rate in each neighborhood for each borough was used in the analysis except for Staten Island ([Dataset 1](https://www.health.ny.gov/statistics/cancer/registry/table2/tb2totalbronx.htm),
[Dataset 2](https://www.health.ny.gov/statistics/cancer/registry/table2/tb2totalkings.htm),
[Dataset 3](https://www.health.ny.gov/statistics/cancer/registry/table2/tb2totalnewyork.htm),
[Dataset 4](https://www.health.ny.gov/statistics/cancer/registry/table2/tb2totalqueens.htm))

Data for cancer incidence and mortality rates was obtained from the New York State Department of Health’s Cancer Registry for cancer rates in each borough and neighborhood of New York City. To clean this dataset, we renamed columns to their appropriate titles, filtered the year range from 2005 – 2019 and by the borough or neighborhood of interest. We selected columns related to the rates of cancer incidence and mortality which were given in rates per 100,000 people.  

The columns of interest for our analysis are: 

`year`: The year the data was reported 

`incidence_per_100k`: The cancer incidence rate per 100,000 people 

`mortality_per_100k`: The cancer mortality rate per 100,000 people 

4. (Angelica's Datasets)

<br>
5. Age as a Predictor of Death (in relation to Suicide and Opioid Related Deaths): 

* Death by Age [(Dataset)](https://health.data.ny.gov/Health/Vital-Statistics-Deaths-by-Resident-County-Region-/xit9-mprv) 

Data was obtained from the Health Department of New York State. The ‘Vital Statistics Deaths by Resident County, Region, and Age-Group: Beginning 2003’ dataset was filtered for the `region` of “NYC”, in order to depict the trend in number of deaths by county in the NYC region. The resulting dataset has 1,023 rows and 5 columns.  

The following columns are of focus for our analysis: 

`year` : calendar year in which the deaths took place 

`county_name` : county of resident 

`age_group` : age group 

`deaths` : number of deaths 

* Death in New York State [(Dataset)](https://health.data.ny.gov/Health/Vital-Statistics-Deaths-by-Region-and-Age-Group-by/c3ns-hz2v)

Data was obtained from the Health Department of New York State. The first dataset used to observe the differences in the leading causes of death among different age groups was the ‘Vital Statistics Deaths by Region and Age-Group by Selected Cause of Death: Beginning 2003’ which contains 8,472 rows and 6 columns, for our analysis we retained all columns of the dataset, cleaned up the column titles and recoded the use of “CLRD: in the `selected_cause_of_death` column to “Chronic Lower Respiratory Disease”, for ease of interpretation. 

The following column are of focus for our analysis: 

`year` : calendar year in which the deaths took place 

`age_group` : age group 

`selected_cause_of_death` : high level aggregation of the cause of death of the resident 

`deaths`  : number of deaths among New York State residents for a calendar  

  

* Opioid Death and Suicide Death Datasets ([Dataset 1](https://health.data.ny.gov/Health/Vital-Statistics-Opioid-Related-Deaths-by-Age-Grou/qabx-2sqw), [Datset 2](https://health.data.ny.gov/Health/Vital-Statistics-Suicide-Deaths-by-Age-Group-Race-/j6fz-a4ta))

Data was obtained from the Health Department of New York State, by merging two datasets by the shared fields of year, sex, region, race, and age group.  We then filtered the merged datasets for the data groups that were known and for the `region` of “NYC” and mutated the `age_group` variable to a factor variable, resulting in a table with 1,859 rows and 4 columns. 

The columns of interest for our analysis are: 

`year` : calendar year in which the death took place 

`age_group` : age group 

`opioid_poisoning_deaths` : death in which a drug poisoning is the cause of death 

`suicide_deaths` : death in which suicide is the cause of death 